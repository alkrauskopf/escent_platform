<table id="<%= title.underscore %>" class="tablesorter">
	<thead>
		<tr>
			<th style="vertical-align:middle"><center><%= @classroom.course_name %></center></th>
			<% if title == "All Topics" -%> 
			<th style="vertical-align:middle"><center>Schedule</center></th>
			<th style="vertical-align:middle"><center>Current Topic</center></th>
			<% end -%>  
			<th style="vertical-align:middle;"><center><strong></strong></center></th>
			<th style="vertical-align:middle"><center><strong></strong></center></th>
			<th></th>
		</tr>
	</thead>
	<tbody>
		<% topics_list = topics.sort { |a,b| a.estimated_start_date <=> b.estimated_start_date }%>
		<% for topic in topics_list do -%>
		<tr>
			<td  style = "font-size:14px; font-weight:bold; vertical-align:middle; text-align:center"><%= topic.title %></td>
			<% if title == "All Topics" -%>  
				<td width=20%, style = "font-size:11px; font-weight:normal; text-align:center">
					<% unless topic.estimated_start_date.nil?%><%= topic.estimated_start_date.strftime("%b-%d, %Y")%> <% end %>
					<% unless topic.estimated_end_date.nil? %><br/><%= topic.estimated_end_date.strftime("%b-%d, %Y") %> <% end %>
				</td>
				<td width=10%, style="vertical-align:middle;align:center;padding-left:30px"><%= radio_button_tag "featured", topic.public_id, @classroom.featured_topic == topic, :class => "featured_on_iwing" %></th>
			<% end -%>  
			<td width=20%, style="vertical-align:middle;padding-left:10px">
				<%= button_to_remote "Add/Remove Resources", {:update => "topics_panel", :url => {:controller => :topics, :action => :assign_resource,:organization_id => @current_organization, :classroom_id => @classroom, :topic_id => topic}, :method => :get}, :class =>"fsn-button ui-button ui-state-default ui-corner-all" %>
				<%#= button_to_remote "Add/Remove Resources", {:update => "topics_panel", :url => {:controller => :topics, :action => :edit,:organization_id => @current_organization, :classroom_id => @classroom.id, :id => topic}, :method => :get}, :class =>"fsn-button ui-button ui-state-default ui-corner-all" %>
			</td>
			<td width=10%, style="vertical-align:middle;padding-left:10px">
				<%= button_to_remote "Edit Topic", {:update => "topics_panel", :url => {:controller => :topics, :action => :edit,:organization_id => @current_organization, :classroom_id => @classroom.id, :id => topic}, :method => :get}, :class =>"fsn-button ui-button ui-state-default ui-corner-all" %>
			</td>
			<td width=10%, style="vertical-align:middle; align:center">
				<% if topic.can_be_deleted? -%>
				<%= button_to_remote "Delete Topic", {:update => "topics_panel", :url => {:controller => :topics, :action => :destroy,:organization_id => @current_organization,:classroom_id => @classroom.id, :id => topic}, :confirm => 'Are you sure?', :method => :post}, :class =>"fsn-button ui-button ui-state-default ui-corner-all" %>
				<% end -%>
			</td>
		</tr>
		<% end -%>
	</tbody>
</table>
<script type="text/javascript" charset="utf-8">
jQ(document).ready(function() {
  jQ("#<%= title.underscore %>").tablesorter({ 
     headers: { 
         // we start counting at zero
         5: { 
             // disable it by setting the property sorter to false 
             sorter: false 
         }
     } 
  });
  <% if title == "All Topics" -%>
  jQ(".featured_on_iwing").change(function() {
    alert("are you sure?" + jQ(this).attr("value"));
	jQ.post("<%= url_for(:controller => :topics, :action => :update_featured_topic, :classroom_id => @classroom.id) %>", { id: jQ(this).attr("value") } );
  });
  <% end -%>
});
</script>