<div id="form_content">

	<div id="form_content_3" style="visibility:hidden;">
		<p><strong>CALL FOR ACTION</strong></p>
		<p>Help text</p>
		
		<%= link_to_function("Toobar Text" , "Element.show('toolbar_div');Element.hide('text_div')") %>
		<%= link_to_function("Text Area" , "Element.show('text_div');Element.hide('toolbar_div')") %>
		<% str = @current_organization.content_object_of_page_section("index", "call_to_action") %>
		<div id="toolbar_div">
		  <form method="post" action="#" class="ajax">
	    <p><%= text_area_tag "sections[call_to_action]", @current_organization.content_object_of_page_section("index", "call_to_action"), :id => "sections_call_to_action", :class => "mceEditor", :rows => 15, :cols => 60 %></p>
		  <br style="clear:both" />
		  <p><%= submit_tag "Save" %></p>
		  </form>
		</div>

		<div id="text_div" style="display:none;">
		  <%= form_tag("admin/our_causes/form_submit" , :multipart => true , :target => "frame_form") -%>
			<div id="preview_image_div"><%= PageSection.image_value(str) %> </div>
			<p><%= file_field_tag "sections[call_to_action][image]" , :onchange => "this.form.action = '#{url_for(:controller => 'our_causes' , :action => 'preview_image')}';this.form.submit();" %></p>
			<br style="clear:both" />
			<p><%= text_area_tag "sections[call_to_action][value]" ,  PageSection.body_value(str) , :rows => 15, :cols => 60 %></p>
			<br style="clear:both" />
			<%= submit_tag "save" , :onclick => "this.form.action = '#{url_for(:controller => 'our_causes' , :action => 'form_submit')}';this.form.submit();"%>
		</form>
		<iframe id="frame_form" name="frame_form" style="width:1px;height:1px;border:0px" src="about:blank"></iframe>
		</div>
		<!--<form method="post" action="#" class="ajax">
		<p><%#= text_area_tag "sections[call_to_action]", @current_organization.content_object_of_page_section("index", "call_to_action"), :id => "sections_call_to_action", :class => "mceEditor", :rows => 15, :cols => 60 %></p>
		<br style="clear:both" />
		<p><%#= submit_tag "Save" %></p>
		</form>-->
		
		<br style="clear:both" />
		<div id="fundraising_campaigns_panel" style="margin-top: 20px;">
		<%= render :file => "/admin/fundraising_campaigns/index" %>
		</div>
	</div>
	<div id="form_content_4" style="visibility:hidden;">
		<p><strong>WHAT WE HAVE DONE</strong></p>
		<p>Help text</p>
		<form method="post" action="#" class="ajax">		
		<p><%= text_area_tag "sections[followup]", @current_organization.content_object_of_page_section("index", "followup"), :id => "sections_followup", :class => "mceEditor", :rows => 15, :cols => 60 %></p>
		<br style="clear:both" />		
		<%= submit_tag "Save" %>		
		</form>
	</div>
	<div id="form_content_5" style="display:none">
		<p><strong>RELATED CAUSES </strong></p>
				<div style="float:right"><a href="#" id="show_cause_partners">View Cause Partners</a></div>
		<p>Help text</p>		

		<br style="clear:both" />		

    <script type="text/javascript" charset="utf-8">
      jQ(document).ready(function() {
        jQ("#show_cause_partners").click(function() {
          jQ("ul.ui-tabs-nav li:eq(3) a").click();
          jQ("h3.ui-accordion-header:eq(1) a").click();
        })
      })
    </script>    
		<br style="clear:both" />
		<p style="font-weight: bold; margin-top: 20px;">Trusted Topic Sourcess</p>
		<% form_remote_tag(:url => {:controller => "/admin/our_causes", :action => :update_trusted_topic_sources, :organization_id => @current_organization}) do -%>
		<div style="overflow: scroll; width:400px; height:300px; margin-top: 20px; padding-left: 10px;">
			<ul id="form_content_5_trusted_topic_sources" style="list-style:none;">
				<%= render :partial => "/admin/our_causes/cause_parthner", :collection => @current_organization.cause_partners %>
			</ul>
			<br style="clear:both" />
		</div>
		<%= submit_tag "Save" %>
		<% end -%>
	</div>	
	<div id="form_content_1" style="display:none">

		<p>Help text</p>
		<!--
		<p>Content Search Filter</p>
		<div style="margin-bottom: 20px;">
		<% form_remote_tag(:url => {:controller => :our_causes, :action => :update_content_search_settings, :organization_id => @current_organization}, :loading => "Element.show('loading');", :complete => "Element.hide('loading');", :update => "update_content_search_settings_info") do -%>
			<% for option in SearchSetting::ContentOptions do -%>
				<%= radio_button_tag "Content Search Filter", option, @current_organization.search_setting_value_named("Content Search Filter") == option %>  <label style="margin-right:10px;"> <%= option %></label>
			<% end -%>
			<br style="clear:both;" />
			<p>
				<%= submit_tag "Save", :class =>"fsn-button ui-button ui-state-default ui-corner-all", :style => "margin-right:10px;" %>
				<span id="update_content_search_settings_info"></span>
			</p>
		<% end -%>
		</div>
		<br style="clear:both" />
		-->
		<%= render :file => "/admin/topics/index" %>
	</div>
</div>
<div id="iwing_modules">
	<h4>OUR CAUSES MODULES</h4>
	<div id="iwing_modules_warp" class="clear">
		<div id="iwing_modules_1" title="#form_content_1">OUR CAUSE</div>
		<div id="side_content">
			<div id="iwing_modules_3" class="side_div" title="#form_content_3"><span>CALL FOR ACTION</span></div>
			<div id="iwing_modules_4" class="side_div" title="#form_content_4"><span>WHAT WE HAVE DONE</span></div>
			<div id="iwing_modules_5" class="side_div" title="#form_content_5"><span>RELATED CAUSES</span></div>			
		</div>
		<br style="clear:both" />
	</div>
</div>
<br style="clear:both" />
<!-- please do not delete next line, that is a javascript hack -->
<script1 type="text/javascript">
</script>	
<script type="text/javascript">		
	jQ(document).ready(function() {
		var AUTH_TOKEN = "<%= protect_against_forgery? ? form_authenticity_token : '' %>";
		jQ.ajaxSetup({data:{authenticity_token : AUTH_TOKEN}});
		jQ("form.ajax").submit(function() {
			var data = {};

			jQ("textarea.mceEditor", this).each(function() {
				data[this.name] = tinyMCE.get(this.id).getContent();
			});
			jQ("textarea.text_edit", this).each(function() {
				data[this.name] = tinyMCE.get(this.id).getContent();
			});
		
		  jQ.post("<%= url_for(:controller => :our_causes, :action => :index, :organization_id => @current_organization , :text_type => '"+ type_text +"') %>", data);

	    return false;
	  });
	  
		var modules = [];
		var form_contents = [];
		for (var i=1; i<=5; i++) {
			modules.push(jQ("#iwing_modules_" + i));
			form_contents.push(jQ("#form_content_" + i));
		}
		function hideModules() {
			for (var i=0; i < modules.length; i++) {
				modules[i].css({"background-color": "#f0f0e8"}); 
				form_contents[i].css({"display": "none","visibility": "hidden"});
			}			
		}
		for (var x = 0; x < modules.length; x++) {
			modules[x].corner("5px");
			modules[x].click(function() {
				hideModules();
				jQ(this).css({"background-color": "#C6D4E1"});
				target_id = jQ(this).attr("title");
				jQ(target_id).css({"display": "block", "visibility": "visible"});
				
			})
		}
		jQ("#iwing_modules_1").click();
		// if (tinyMCE.getInstanceById("sections_call_to_action") || tinyMCE.getInstanceById("sections_call_to_action")) {
		// 	initTinyMCE();
		// }
		// tinyMCE.execCommand("mceAddControl", false, 'sections_call_to_action');
		// tinyMCE.execCommand("mceAddControl", false, 'sections_followup');
	})
</script>
<style type="text/css">
/*#main_content { width:790px; }
* html #main_content { width:820px; }*/
#form_content { float:left; width:560px; }
#iwing_modules { float: right; width: 256px; }
#iwing_modules h4 { margin-bottom:10px; }
#iwing_modules_warp { padding:5px; border:1px solid #6e6e6e; text-align:center; }
#iwing_modules_warp #iwing_modules_1 { float: right; width: 155px; height: 310px; border: 1px solid #bfbfbf; margin: 0; background-color: #f0f0e8; line-height: 310px; }	
#iwing_modules_warp #side_content { float: left; width: 84px; margin: 0; }	
#iwing_modules_warp #side_content div.side_div { margin-bottom: 5px; background-color: #f0f0e8; }
#iwing_modules_warp div span { font-size: 11px; }
#iwing_modules_warp #side_content #iwing_modules_2 { height: 100px; background-color: #C6D4E1; }
#iwing_modules_warp #side_content #iwing_modules_3 { height: 100px; }
#iwing_modules_warp #side_content #iwing_modules_4 { height: 100px; line-height: 100px; }
#iwing_modules_warp #side_content #iwing_modules_5 { height: 100px; margin-bottom: 0; }
#iwing_modules_warp #side_content #iwing_modules_2 span,
#iwing_modules_warp #side_content #iwing_modules_3 span,
#iwing_modules_warp #side_content #iwing_modules_4 span,
#iwing_modules_warp #side_content #iwing_modules_5 span { display: block; margin-top: 35px; line-height: 14px; }
</style>