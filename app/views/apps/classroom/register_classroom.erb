

<div style = "font-size:12px; color: #000000;padding-left:0px;">
	<% unless @classroom.classroom_periods.empty? %>
		<% key_visibility = @classroom.open? ? "hidden" : "visible" %>
		<table style="width:250px;margin-left:0px">
			<style type="text/css" media="screen">
	    		table,tr,td { border:none }
				table tr:hover{
	    		background-color: transparent;
	  			}
			</style>
			<tbody>  
				<tr  style="width:250px; border:0px solid #ddd" >
					<td   id = "register_student" style="width:60px; width:fixed; vertical-align:middle;  padding-left:2px; padding-right:2px; padding-top:6px; text-align:center; color: #000000; font-size:10px; font-weight:normal">
						<span class="fsn-button ui-button ui-state-default ui-corner-all" style="cursor:pointer">
							Join
						</span>
					</td>
					<td  style=" width:30px; width:fixed; visibility:<%=key_visibility %>; color: #2061a5; border:0px solid #ddd; padding-top:0px; vertical-align:bottom; text-align:right; padding-right:0px; font-size:11px">
						Key:
					</td>
					<td  style=" visibility:<%=key_visibility %>; border:0px solid #ddd; padding-top:0px; vertical-align:middle; text-align:left; font-size:11px">
						<%=  text_field(:registration, :key, :value=>"", :size=> 8) %>
					</td>
				</tr>
			</tbody>
		</table>
		<% per_visibility = (@classroom.classroom_periods.size == 1) ? "hidden" : "visible" %>
		<table style="width:250px;margin-left:0px;visibility:<%= per_visibility %>">
			<style type="text/css" media="screen">
	    		table,tr,td { border:none }
				table tr:hover{
	    		background-color: transparent;
	  			}
			</style>
			<tbody>  
				<tr  style="width:250px; border:0px solid #ddd;" >
					<td  style=" border:0px solid #ddd; padding-top:3px; vertical-align:middle; text-align:center; font-size:11px">
						<%=  select(:classroom_period, :period_id, @classroom.classroom_periods.sort_by{|a| [a.name]}.collect{|t| [t.name, t.id]},{:include_blank =>'Select Your Period'}) %>
					</td>
				</tr>
			</tbody>
		</table>
	<% else -%>
		No Periods Defined
	<% end -%>
</div>
<script type="text/javascript">
jQ(document).ready(function() {
	jQ('#register_student').click(function() {
		var period = jQ('#classroom_period_period_id').val();
		var key = jQ('#registration_key').val();
		var url = "<%= url_for :controller => '/apps/classroom', :action => :self_register_student, :organization_id => @current_organization, :student_id => @current_user, :classroom_id => @classroom %>";
			jQ.get(url, {'period_id':period, 'reg_key':key}, function(data) {
			jQ("#student_add").html(data); 
	   		jQ("#student_add").show();
			});
	})
});
</script>

