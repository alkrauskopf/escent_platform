<div id="manage_plan_<%=student.id%><%=subject.public_id%>">
  <% if student_plan.nil? %>
    <div class="row precision_milestone_panel ifa_panel_title">
      <% if @current_user == student %>
        <div class="button_blue" id="create_plan_<%=subject.id%>">
          Create Plan
        </div>
      <% end %>
    </div>
  <% else %>
    <% if !show_form %>
      <div  class="ifa_subject_plan_box ">
        <div class= "precision_prep_gold_panel">
          <div class="col-md-3">
            <% if student_plan.updateable?(@current_user) %>
              <div class="button_gray ifa_plan_button" id="show_form_<%=subject.id%>">
                Update Needs/Goals
              </div>
            <% end %>
          </div>
          <div class="col-md-6">
            <%= subject.name.upcase %> Growth Plan
          </div>
          <div class="col-md-3">
            <%= student.full_name.titleize %>
          </div>
        </div>
        <div class="ifa_subject_plan_content">
          <%= render :partial =>  "/ifa/ifa_plan/show_plan", :locals=>{:plan=> student_plan}%>
        </div>
        <%= render :partial =>  "/ifa/ifa_plan/teacher_remarks", :locals=>{:plan=> student_plan, :remarks => student_plan.remarks, :show_form=>false} %>

        <div class="row ifa_subject_plan_content">
          <div class="col-md-12">
            <% student_plan.strands(@current_standard).each do |strand| %>
              <%= render :partial =>  "/ifa/ifa_plan/strand_milestones", :locals=>{:plan=>student_plan, :strand => strand, :milestone_form => 'No'}%>
            <% end %>
          </div>
        </div>
      </div>
    <% else %>
          <% if !student_plan.user.nil? && !student_plan.act_subject.nil? %>
            <%= render :partial =>  "/ifa/ifa_plan/form_plan", :locals=>{:plan=>student_plan}%>
          <% else %>
            Plan's Student or Subject Do Not Exist
          <% end %>
        <% end %>
      <% end %>

</div>
<script type="text/javascript">
  jQ(document).ready(function() {
    jQ('#create_plan_<%=subject.id%>').click(function() {
      var url = "<%= ifa_plan_create_url(:organization_id => @current_organization, :subject_id => subject.id) %>";
      jQ.get(url, {}, function(data) {
        jQ("#manage_plan_<%=student.id%><%=subject.public_id%>").html(data);
        jQ("#manage_plan_<%=student.id%><%=subject.public_id%>").show();
      });
    })
  });
</script>
<script type="text/javascript">
  jQ(document).ready(function() {
    jQ('#show_form_<%=subject.id%>').click(function() {
      var url = "<%= ifa_plan_show_form_url(:organization_id => @current_organization, :act_subject_id => subject.id) %>";
      jQ.get(url, {}, function(data) {
        jQ("#manage_plan_<%=student.id%><%=subject.public_id%>").html(data);
        jQ("#manage_plan_<%=student.id%><%=subject.public_id%>").show();
      });
    })
  });
</script>
