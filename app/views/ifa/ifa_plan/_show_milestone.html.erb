<div id="plan_milestone<%=milestone.id%>">
  <div class="row ifa_milestone_show_header_row">
    <div class="col-md-3">
      <% if !milestone.achieved?%>
          <div class="ifa_milestone_show_button">
          <span class="button_green" id="milestone_show_achieved<%=milestone.public_id%>">
            <%= 'ACHIEVE?' %>
          </span>
          </div>
      <% else %>
          <div class="ifa_milestone_achieved">
            <% achievement_level(milestone.strand, milestone.range).times do %>
                <i class="star_achievement"></i>
            <% end %>
            <span class="ifa_milestone_achieved_date">
            <%= !milestone.achieve_date.nil? ? time_ago_in_words(milestone.achieve_date).sub(/about /, '') + " ago" : ''%>
          </span>
          </div>
      <% end %>
    </div>
    <div class="col-md-6 ">
      <div class="ifa_milestone_show_range">
        Milestone <%= milestone.strand.abbrev %> &nbsp;<%= !milestone.range.nil? ? milestone.range.range : '' %>
      </div>
      <div class="ifa_milestone_show_benchmarks">
        <% if !benchmarks(milestone.strand, milestone.range, milestone.standard).empty? %>
          <span style ="text-decoration:underline;">
            <a id="b_<%= milestone.id.to_s %>" href="">View Benchmarks</a>
            <%= render :partial => "/apps/shared/help_box_ifa_benchmarks", :locals => {:id => ('b_' + milestone.id.to_s), :titl=> (mastery_label(milestone.range, false) + " | " + milestone.strand.name),
                                                                                     :blue=> 'Benchmark',
                                                                                     :body=> benchmarks(milestone.strand, milestone.range, milestone.standard), :height=> 400, :width=> 650 } %>
          </span>
        <% end %>
        &nbsp;&nbsp;&nbsp;
        <% if !improvements(milestone.strand, milestone.range, milestone.standard).empty? %>
          <span style ="text-decoration:underline;">
            <a id="i_<%= milestone.id.to_s %>" href="">View Improvement Ideas</a>
            <%= render :partial => "/apps/shared/help_box_ifa_benchmarks", :locals => {:id => ('i_' + milestone.id.to_s), :titl=> (mastery_label(milestone.range, false) + " | " + milestone.strand.name),
                                                                                       :blue=> 'Improvement Idea',
                                                                                       :body=> improvements(milestone.strand, milestone.range, milestone.standard), :height=> 400, :width=> 650 } %>
          </span>
        <% end %>
      </div>
    </div>
    <div class="col-md-3">
      <% if !milestone.achieved? %>
        <div class="ifa_milestone_destroy_button">
          <span class="button_red" id="milestone_show_destroy<%=milestone.public_id%>">
            <%= 'DESTROY' %>
          </span>
        </div>
      <% end %>
    </div>
  </div>
  <div class="row ifa_milestone_show_descript">
    <div class="col-md-2 ">
      <% if !milestone.achieved?%>
        <div class="ifa_milestone_show_button">
          <span class="button_blue" id="milestone_show_change<%=milestone.public_id%>">
            <%= 'Update Plan' %>
          </span>
        </div>
      <% end %>
    </div>
    <div class="col-md-8 ifa_milestone_show_label">
      My Action Plan
      <div class="ifa_plan_text">
        <%= simple_format milestone.description.nil? ? 'Not Defined' : milestone.description%>
      </div>
      </div>
  </div>
  <hr>
  <div class="ifa_milestone_show_evidence">
    <% if !milestone.achieved? && evidence_form == 'Yes' %>
      Display Form
    <% else %>
      <div class="row ifa_milestone_show_evidence ">
        <div class=" col-md-2"></div>
        <div class=" col-md-7">
          <div id="student_assessments<%=milestone.id%>">
            <% if !milestone.range.nil? && !milestone.strand.nil? %>
                <div class="resource_levels_close" >
                  <%= link_to '', ifa_plan_student_cell_data_path(:organization_id => @current_organization, :student_id => @current_user.public_id, :act_score_range_id => milestone.range.public_id, :act_standard_id => milestone.strand.public_id) %>
                  Relevant Assessment Data
                  <span></span>
                </div>
            <% end %>
          </div>
        </div>
      </div>
      <div class="row">
        <div class=" col-md-2 ">
          <% if !milestone.achieved?%>
            <div class="ifa_milestone_add_evidence_button">
              <span class="button_gray" id="milestone_evidence_add<%=milestone.public_id%>">
                <%= 'Add Evidence' %>
              </span>
            </div>
          <% end %>
        </div>
        <div class="col-md-9">
          <div class='ifa_milestone_add_evidence_box'>
            <% if milestone.evidences.empty? %>
              No Evidence Attachments
            <% else %>
              Render Table List
            <% end %>
          </div>
        </div>
        <div class="col-md-1"></div>
      </div>
    <% end %>
  </div>
  <script type="text/javascript" charset="utf-8">
    jQ(document).ready(function() {
      jQ('#student_assessments<%=milestone.id%> .resource_levels_close').toggleResourceLevels();
      jQ('#student_assessments<%=milestone.id%> .resource_levels_open').toggleResourceLevels();
    });
  </script>
  <script type="text/javascript" charset="utf-8">
    jQ(document).ready(function() {
      jQ('#student_evidences<%=milestone.id%> .resource_levels_close').toggleResourceLevels();
      jQ('#student_evidences<%=milestone.id%> .resource_levels_open').toggleResourceLevels();
    });
  </script>
  <script type="text/javascript">
    jQ(document).ready(function() {
      jQ("#milestone_show_destroy<%=milestone.public_id%>").click(function(){
        var url = "<%= ifa_milestone_destroy_url(:organization_id => @current_organization, :ifa_plan_milestone_id => milestone.public_id) %>";
        jQ.get(url, {}, function(data) {
          jQ("#strand_milestone<%=milestone.act_standard.public_id%>").html(data);
          jQ("#strand_milestone<%=milestone.act_standard.public_id%>").show();
        });
      })
    });
  </script>
  <script type="text/javascript">
    jQ(document).ready(function() {
      jQ("#milestone_show_change<%=milestone.public_id%>").click(function(){
        var url = "<%= ifa_milestone_change_url(:organization_id => @current_organization, :ifa_plan_milestone_id => milestone.public_id) %>";
        jQ.get(url, {}, function(data) {
          jQ("#strand_milestone<%=milestone.act_standard.public_id%>").html(data);
          jQ("#strand_milestone<%=milestone.act_standard.public_id%>").show();
        });
      })
    });
  </script>
  <script type="text/javascript">
    jQ(document).ready(function() {
      jQ("#milestone_show_achieved<%=milestone.public_id%>").click(function(){
        var url = "<%= ifa_milestone_achieved_url(:organization_id => @current_organization, :ifa_plan_milestone_id => milestone.public_id) %>";
        jQ.get(url, {}, function(data) {
          jQ("#strand_milestone<%=milestone.act_standard.public_id%>").html(data);
          jQ("#strand_milestone<%=milestone.act_standard.public_id%>").show();
        });
      })
    });
  </script>
  <script type="text/javascript">
    jQ(document).ready(function() {
      jQ("#milestone_evidence_add<%=milestone.public_id%>").click(function(){
        var url = "<%= ifa_milestone_evidence_form_url(:organization_id => @current_organization, :ifa_plan_milestone_id => milestone.id) %>";
        jQ.get(url, {}, function(data) {
          jQ("#plan_milestone<%=milestone.id%>").html(data);
          jQ("#plan_milestone<%=milestone.id%>").show();
        });
      })
    });
  </script>
</div>