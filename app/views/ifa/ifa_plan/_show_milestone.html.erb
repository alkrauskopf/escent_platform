<div class="row ifa_milestone_show_row">
  <div class="col-md-4 ">
    <div class="row ifa_milestone_show_time">
      Updated: <%= time_ago_in_words(milestone.updated_at).sub(/about /, '') + " ago" %>
    </div>
    <div class="row ifa_milestone_show_range">
      <%= mastery_label(milestone.range, true) %>
    </div>
    <div class="row ifa_milestone_show_benchmarks">
      <a id="b_<%= milestone.id.to_s %>" href="">View Benchmarks</a>
      <%= render :partial => "/apps/shared/help_box_ifa_benchmarks", :locals => {:id => ('b_' + milestone.id.to_s), :titl=> (mastery_label(milestone.range, false) + " | " + milestone.strand.name),
                                                                                 :blue=> 'Benchmark',
                                                                                 :body=> benchmarks(milestone.strand, milestone.range, milestone.standard), :height=> 400, :width=> 650 } %>
    </div>
    <div class="row ifa_milestone_show_benchmarks">
      <a id="i_<%= milestone.id.to_s %>" href="">View Improvement Ideas</a>
      <%= render :partial => "/apps/shared/help_box_ifa_benchmarks", :locals => {:id => ('i_' + milestone.id.to_s), :titl=> (mastery_label(milestone.range, false) + " | " + milestone.strand.name),
                                                                                 :blue=> 'Improvement Idea',
                                                                                 :body=> improvements(milestone.strand, milestone.range, milestone.standard), :height=> 400, :width=> 650 } %>
    </div>
    <% if !milestone.achieved?%>
      <div class="row ifa_milestone_show_button">
        <span class="button_blue" id="milestone_show_change<%=milestone.public_id%>">
          <%= 'Change' %>
        </span>
      </div>
        <div class="row ifa_milestone_show_button">
        <span class="button_green" id="milestone_show_achieved<%=milestone.public_id%>">
          <%= 'Achieved!' %>
        </span>
        </div>
    <% end %>
  </div>
  <div class="col-md-6">
    <div class="row ifa_milestone_show_descript">
      <div style="font-weight:bold">My Milestone Plan:
        <% if milestone.achieved?%>
          <span class="ifa_milestone_achieved">
            <% achievement_level(milestone.strand, milestone.range).times do %>
                <i class="star_achievement"></i>
            <% end %>
          </span>
        <% end %>
      </div>
      <div class="ifa_plan_text">
        <%= simple_format milestone.description.nil? ? 'None' : milestone.description%>
      </div>
    </div>
    <hr>
    <% if !milestone.range.nil? && !milestone.strand.nil? %>
      <div class="row ifa_milestone_show_descript">
        <div id="student_assessments<%=milestone.id%>">
          <div class="resource_levels_close" >
            <%= link_to '', ifa_plan_student_cell_data_path(:organization_id => @current_organization, :student_id => @current_user.public_id, :act_score_range_id => milestone.range.public_id, :act_standard_id => milestone.strand.public_id,) %>
            Relevant Assessment Data
            <span></span>
          </div>
        </div>
      </div>
      <hr>
    <% end %>
    <div class="row ifa_milestone_show_descript">
      <div style="font-weight:bold">My Evidence:</div>
      <div class="ifa_plan_text">
        <%= simple_format milestone.evidence.nil? ? 'None Documented' : milestone.evidence%>
      </div>
    </div>
  </div>
  <div class="col-md-2">
    <% if !milestone.achieved? %>
      <div class="row ifa_milestone_show_button">
        <span class="button_red" id="milestone_show_destroy<%=milestone.public_id%>">
          <%= 'Destroy' %>
        </span>
      </div>
    <% end %>
  </div>
</div>
<script type="text/javascript" charset="utf-8">
  jQ(document).ready(function() {
    jQ('#student_assessments<%=milestone.id%> .resource_levels_close').toggleResourceLevels();
    jQ('#student_assessments<%=milestone.id%> .resource_levels_open').toggleResourceLevels();
  });
</script>
<script type="text/javascript">
  jQ(document).ready(function() {
    jQ("#milestone_show_destroy<%=milestone.public_id%>").click(function(){
      var url = "<%= ifa_milestone_destroy_url(:organization_id => @current_organization, :ifa_plan_milestone_id => milestone.public_id) %>";
      jQ.get(url, {}, function(data) {
        jQ("#strand_milestone<%=milestone.act_standard.public_id%>").html(data);
        jQ("#strand_milestone<%=milestone.act_standard.public_id%>").show();
      });
    })
  });
</script>
<script type="text/javascript">
  jQ(document).ready(function() {
    jQ("#milestone_show_change<%=milestone.public_id%>").click(function(){
      var url = "<%= ifa_milestone_change_url(:organization_id => @current_organization, :ifa_plan_milestone_id => milestone.public_id) %>";
      jQ.get(url, {}, function(data) {
        jQ("#strand_milestone<%=milestone.act_standard.public_id%>").html(data);
        jQ("#strand_milestone<%=milestone.act_standard.public_id%>").show();
      });
    })
  });
</script>
<script type="text/javascript">
  jQ(document).ready(function() {
    jQ("#milestone_show_achieved<%=milestone.public_id%>").click(function(){
      var url = "<%= ifa_milestone_achieved_url(:organization_id => @current_organization, :ifa_plan_milestone_id => milestone.public_id) %>";
      jQ.get(url, {}, function(data) {
        jQ("#strand_milestone<%=milestone.act_standard.public_id%>").html(data);
        jQ("#strand_milestone<%=milestone.act_standard.public_id%>").show();
      });
    })
  });
</script>